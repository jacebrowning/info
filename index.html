<!DOCTYPE html>
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Jace Browning
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/custom.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body  class="theme-custom-blue">

    <div class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      <h1>
          Jace Browning
      </h1>
      <p class="lead">I build, customize, integrate, and teach engineering software tools.</p>
    </div>

    <nav class="sidebar-nav">

      <a class="sidebar-nav-item" href="/about/">About</a>

      <a class="sidebar-nav-item active" href="/">Blog</a>

      <a class="sidebar-nav-item" href="/projects/">Projects</a>

    </nav>

    
    <iframe src="https://github.com/sponsors/jacebrowning/button" title="Sponsor jacebrowning" height="40" width="120" style="border: 0;"></iframe>
    

    <p>&copy; 2021. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/03/22/static-sites-with-heroku/">
        Using Heroku to Review Static Websites
      </a>
    </h1>

    <span class="post-date">22 Mar 2017</span>

    <p><a href="https://devcenter.heroku.com/start">Heroku</a> is a great platform to deploy your full-stack application. While not the appropriate place to deploy a production frontend application, Heroku&#39;s <a href="https://devcenter.heroku.com/articles/github-integration-review-apps">Review Apps</a> offer an automated mechanism to create a temporary deployment of your application to a unique, predictable URL.</p>

<h2>Review Apps</h2>

<p>After creating a Heroku account, create a <a href="https://devcenter.heroku.com/articles/pipelines">&quot;Pipeline&quot;</a> for your project and connect it to a repository on GitHub. Heroku&#39;s Pipelines allow your application code to be deployed multiple times, from different branches.</p>

<p>Regardless of the technology your application uses, you will need to tell Heroku about your application&#39;s dependencies in a <a href="https://devcenter.heroku.com/articles/app-json-schema">manifest file</a>. The most basic <code>app.json</code> will look similar to the following:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grwifi"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nl">"formation"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nl">"addons"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h2>Web Server</h2>

<p>In order to serve up our static site, we&#39;ll need to run a web server on Heroku. I developed <a href="https://github.com/jacebrowning/sappy">sappy</a> specifically for the purpose of serving up single-page applications (SPAs) and static websites.</p>

<p>To run our application on Heroku using Sappy, we&#39;ll need to add a few files:</p>

<p><strong><code>runtime.txt</code></strong> indicates that Heroku should use a Python <a href="https://devcenter.heroku.com/articles/buildpacks">buildpack</a> (because Sappy is written in Python):</p>
<div class="highlight"><pre><code class="language-" data-lang="">python-3.6.1
</code></pre></div>
<p><strong><code>requrements.txt</code></strong> tells Heroku to install Sappy using <a href="https://en.wikipedia.org/wiki/Pip_(package_manager)">pip</a> (the package manager for Python):</p>
<div class="highlight"><pre><code class="language-" data-lang="">sappy==1.0.1
</code></pre></div>
<p><strong><code>Procfile</code></strong> specifies <code>sappy</code> as the command to run our application:</p>
<div class="highlight"><pre><code class="language-" data-lang="">web: sappy --port=${PORT}
</code></pre></div>
<h2>Automated Deployment</h2>

<p>After adding the above files to your repository, enable Review Apps on the pipeline we created earlier:</p>

<p><img src="/assets/enable-review-apps.png" alt="enable review apps"></p>

<p>When new pull requests are created on GitHub, Heroku will automatically deploy the code in that branch to a separate Heroku instance:</p>

<p><img src="/assets/review-app-deployment.png" alt="review app deployment"></p>

<p>Because the temporary application deployment performs virtually identical to production, the end-to-end testing and design review that might occur later in our quality assurance process can now be performed before the code is even merged.</p>

<hr>

<p>A working example can be found at: <a href="https://github.com/citizenlabsgr/homepage">github.com/citizenlabsgr/homepage</a></p>

<p>See a typo? Help me <a href="https://github.com/jacebrowning/jacebrowning.info/edit/main/_posts/2017-03-22-static-sites-with-heroku.md">edit</a> this post.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2016/10/21/itemizing-career-goals/">
        Itemizing Your Career Goals
      </a>
    </h1>

    <span class="post-date">21 Oct 2016</span>

    <p>When I was searching for my last job, I found it useful to make a list of all the things I was looking for in a new career. As it turned out, there were actually two categories within these requirements. Upon making a list, I found that I both cared about the company I worked for and the job at hand.</p>

<p>I encourage everyone to make similar lists as a way to learn about your true career goals. You might be surprised that you want something different than you have. I will attempt to maintain these lists as my perspective changes, but here they are.</p>

<h2>Company Requirements</h2>

<ol>
<li><p>Work on new products with friends</p></li>
<li><p>Build tools for software engineers</p></li>
<li><p>Work in an industry that strongly interests me:</p>

<ul>
<li>politics</li>
<li>music</li>
<li>theme parks</li>
</ul></li>
<li><p>Work at &quot;a Python shop&quot;</p></li>
<li><p>Consult teams and companies on:</p>

<ul>
<li>Automation</li>
<li>Quality Assurance</li>
<li>Testing</li>
<li>Agile Methodologies</li>
<li>DevOps</li>
</ul></li>
<li><p>Get paid to work on open source software</p></li>
</ol>

<h2>Job Requirements</h2>

<ol>
<li><p>Feel like at least half of the team cares more than I do</p></li>
<li><p>Flexible working hours and support for asynchronous work</p></li>
<li><p>Work on a team that hates bugs and insists on prioritizing bugs first</p></li>
<li><p>Have some free work time for side projects</p></li>
<li><p>Have a dedicated conference budget</p></li>
</ol>

<hr>

<p>See a typo? Help me <a href="https://github.com/jacebrowning/jacebrowning.info/edit/main/_posts/2016-10-21-itemizing-career-goals.md">edit</a> this post.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2016/09/30/coverage-as-a-service/">
        Test Coverage as a Service
      </a>
    </h1>

    <span class="post-date">30 Sep 2016</span>

    <p>Measuring coverage is an important, but sometimes forgotten part of running tests. One of the common debates is around how much coverage a project should have: 50%, 80%, 100%?</p>

<p>More important than the actual coverage metrics is ensuring that your coverage metrics don&#39;t decrease when adding new code. Coverage metrics don&#39;t tell us when a particular section of code has enough tests, but they do help inform us when a section of code has zero tests.</p>

<h2>Tracking Metrics</h2>

<p>A few options exist for tracking coverage metrics.</p>

<h3>Version Control</h3>

<p>The naive solution is to commit coverage metrics to a file in your project repository. When tests are run, check this file and report an error if coverage decreased. The main disadvantage of this approach is having lots of commits unrelated to functional changes, which adds noise to your repository.</p>

<h3>External Services</h3>

<p>Many external services exist to track coverage metrics. One such example is <a href="https://coveralls.io/">Coveralls</a>. This service works great and is highly recommended for open-source projects to track coverage on pull requests. The main disadvantages of this service are the costs for private repositories and the inability to check coverage metrics locally.</p>

<h2>The Coverage Space</h2>

<p><a href="https://coverage.space">coverage.space</a> is a new RESTful API to track coverage metrics that aims to find a balance between these two options.</p>

<h3>Basic Usage</h3>

<p>The easiest way to get started with The Coverage Space is to use an HTTP client. <a href="https://github.com/jkbrzt/httpie">HTTPie</a> works well for this:</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span>pip <span class="nb">install </span>HTTPie
</code></pre></div>
<p>Update metrics for your project:</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span>http PUT api.coverage.space/my_owner/my_repo <span class="nv">unit</span><span class="o">=</span>90
</code></pre></div>
<p>where <code>my_owner/my_repo</code> matches your project.</p>

<p>Check out the full API documentation at <a href="https://coverage.space/api/">coverage.space/api</a>.</p>

<h3>Command-line Client</h3>

<p>A command-line client is also available to automate the process of reading and uploading coverage metrics:</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span>pip <span class="nb">install</span> <span class="nt">--update</span> coverage.space
</code></pre></div>
<p>After running your tests with coverage enabled, update metrics for your project:</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span>coverage.space my_owner/my_repo unit
</code></pre></div>
<p>where <code>my_owner/my_repo</code> matches your project.</p>

<p>Check out the full client documentation at <a href="https://cli.coverage.space">cli.coverage.space</a>.</p>

<hr>

<p>See a typo? Help me <a href="https://github.com/jacebrowning/jacebrowning.info/edit/main/_posts/2016-09-30-coverage-as-a-service.md">edit</a> this post.</p>

<p>Interested in seeing the full implementation? Check out the <a href="https://github.com/jacebrowning/coverage-space">code</a> on GitHub.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2016/01/24/google-analytics-on-image-requests/">
        Tracking Direct Image Requests with Google Analytics
      </a>
    </h1>

    <span class="post-date">24 Jan 2016</span>

    <p><a href="https://memegen.link/">memegen.link</a> is an open source meme generator. It renders meme images based on the requested URL.</p>

<p>For example, <code>memegen.link/oprah/you-get-a-meme/and-you-get-a-meme.jpg</code> produces this image:</p>

<p><img src="https://memegen.link/oprah/you-get-a-meme/and-you-get-a-meme.jpg" alt="oprah"></p>

<p>The site also provides an <a href="https://api.memegen.link">API</a> to generate memes. This article is about the <a href="https://github.com/jacebrowning/memegen-flask">legacy implementation</a> written using <a href="https://flask.palletsprojects.com/">Flask</a> and <a href="https://www.flaskapi.org/">Flask API</a>.</p>

<h2>Client-side Analytics</h2>

<p>I have added <a href="https://www.google.com/analytics/">Google Analytics</a> to the index and API documentation pages using the standard approach of <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/">embedding</a> JavaScript on the page:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">...
<span class="nt">&lt;body&gt;</span>

  <span class="nt">&lt;script&gt;</span>
    <span class="p">...</span> <span class="dl">'</span><span class="s1">//www.google-analytics.com/analytics.js</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">ga</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">ga</span><span class="p">(</span><span class="dl">'</span><span class="s1">create</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;Google Analytics ID&gt;</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">auto</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">ga</span><span class="p">(</span><span class="dl">'</span><span class="s1">send</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">pageview</span><span class="dl">'</span><span class="p">);</span>
  <span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;/body&gt;</span>
...
</code></pre></div>
<p>And while this works great for HTML rendered in the browser, direct images requests (like the meme image above) go untracked.</p>

<h2>Server-side Analytics</h2>

<p>One solution is to track file downloads on the backend by posting to the Google Analytics API directly using an HTTP library like <a href="https://requests.readthedocs.io/">requests</a>:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">"Sending image: </span><span class="si">%</span><span class="s">s"</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">v</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">tid</span><span class="o">=</span><span class="s">'&lt;Google Analytics ID&gt;'</span><span class="p">,</span>
    <span class="n">cid</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">remote_addr</span><span class="p">,</span>

    <span class="n">t</span><span class="o">=</span><span class="s">'pageview'</span><span class="p">,</span>
    <span class="n">dh</span><span class="o">=</span><span class="s">'memegen.link'</span><span class="p">,</span>
    <span class="n">dp</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
    <span class="n">dt</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>

    <span class="n">uip</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">remote_addr</span><span class="p">,</span>
    <span class="n">ua</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user_agent</span><span class="o">.</span><span class="n">string</span><span class="p">,</span>
    <span class="n">dr</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">referrer</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.google-analytics.com/collect"</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

<span class="k">return</span> <span class="n">send_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div>
<p>While this will track page views for an image, much of the client&#39;s information is still unavailable using this method:</p>

<ul>
<li>geographic location</li>
<li>language setting</li>
<li>device properties</li>
</ul>

<h2>Tricking Clients</h2>

<p>My complete solution involves a bit of hack to return HTML instead of an image for clients that can handle it and the normal image for those that can&#39;t.</p>

<p>Visit <a href="https://memegen.link/fry/not-sure-if-image/or-webpage.jpg">memegen.link/fry/not-sure-if-image/or-webpage.jpg</a> in your browser:</p>

<p><img src="/assets/memegen-in-browser.png" alt="browser"></p>

<p>It appears to be an image that can be downloaded:</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span>wget https://memegen.link/fry/not-sure-if-image/or-webpage.jpg
Length: 27809 <span class="o">(</span>27K<span class="o">)</span> <span class="o">[</span>image/jpeg]
Saving to: <span class="s1">'or-webpage.jpg'</span>
or-webpage.jpg 100%[<span class="o">============================&gt;]</span>  27.16K  70.7KB/s
2016-01-24 20:51:46 <span class="o">(</span>70.7 KB/s<span class="o">)</span> - <span class="s1">'or-webpage.jpg'</span> saved <span class="o">[</span>27809/27809]
</code></pre></div>
<p>But if you view the network tab in <a href="https://developer.chrome.com/devtools">Chrome&#39;s developer tools</a>, you&#39;ll see that it actually loaded a small webpage to run the same client-side Google Analytics JavaScript as above:</p>

<p><img src="/assets/memegen-network.png" alt="network"></p>

<p>This was accomplished by detecting what content types the client can accept:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">mimetypes</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'Accept'</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">','</span><span class="p">)</span>

<span class="k">if</span> <span class="s">'text/html'</span> <span class="ow">in</span> <span class="n">mimetypes</span><span class="p">:</span>
    <span class="n">send_html</span><span class="p">()</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">send_image</span><span class="p">()</span>
</code></pre></div>
<p>If the client can handle HTML, the following is returned:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>

  <span class="nt">&lt;title&gt;</span>NOT SURE IF IMAGE / OR WEBPAGE<span class="nt">&lt;/title&gt;</span>

  <span class="nt">&lt;style&gt;</span>
    <span class="nt">body</span> <span class="p">{</span>
      <span class="nl">background-image</span><span class="p">:</span> <span class="sx">url("/fry/not-sure-if-image/or-webpage.jpg")</span><span class="p">;</span>
      <span class="nl">background-repeat</span><span class="p">:</span> <span class="nb">no-repeat</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

  <span class="nt">&lt;script&gt;</span>
    <span class="p">...</span>
    <span class="nx">ga</span><span class="p">(</span><span class="dl">'</span><span class="s1">create</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;Google Analytics ID&gt;</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">auto</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">ga</span><span class="p">(</span><span class="dl">'</span><span class="s1">send</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">pageview</span><span class="dl">'</span><span class="p">);</span>
  <span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>This causes the browser to render the image as expected, but also run a bit of JavaScript to recored additional information about the client.</p>

<hr>

<p>See a typo? Help me <a href="https://github.com/jacebrowning/jacebrowning.info/edit/main/_posts/2016-01-24-google-analytics-on-image-requests.md">edit</a> this post.</p>

<p>Interested in seeing the full implementation? Check out the <a href="https://github.com/jacebrowning/memegen">code</a> on GitHub.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/09/04/deploying-jekyll-to-github-pages-with-travis/">
        Deploying a Jekyll Blog to GitHub Pages using Travis CI
      </a>
    </h1>

    <span class="post-date">04 Sep 2015</span>

    <p><a href="https://jekyllrb.com/">Jekyll</a> is a &quot;blog-aware static site generator&quot; written in <a href="https://www.ruby-lang.org/">Ruby</a> that will generate a responsive website from <a href="https://help.github.com/articles/markdown-basics/">Markdown</a> and <a href="https://yaml.org/">YAML</a> files.</p>

<p><a href="https://pages.github.com/">GitHub Pages</a> offers you a free way to host static websites. And while they will automatically publish files in a repository named <code>&lt;your-github-id&gt;.github.io</code>, sometimes you need a little more control over the process.</p>

<h2>Project Tooling</h2>

<p>After running <code>$ jekyll new</code>, the base project structure will be generated for you. To simplify setup on additional machines and enable continuous deployment, I like to add additional tooling to this project.</p>

<h3>Gemfile</h3>

<p>A <a href="https://raw.githubusercontent.com/jacebrowning/info/main/Gemfile"><code>Gemfile</code></a> is used to specify the Ruby dependencies (&quot;Gems&quot;) required to generate the website. In addition to <code>jekyll</code>, I&#39;m using:</p>

<ul>
<li><code>rouge</code> - to provide syntax highlighting in code examples</li>
<li><code>html-proofer</code> - to confirm that external links are valid</li>
</ul>

<h3>Gemfile.lock</h3>

<p>The <a href="https://raw.githubusercontent.com/jacebrowning/info/main/Gemfile.lock"><code>Gemfile.lock</code></a> is automatically generated when installing Gems. It&#39;s purpose is to record of the exact version of each dependency the last time the project was successfully deployed.</p>

<h3>Bundler</h3>

<p><code>bundler</code> is a tool that can install and run particular versions of Gems for a project. I prefer to store the Gems locally via <code>$ bundler install --path vendor</code> so that I&#39;m not polluting my system directories and can completely delete all files a project creates.</p>

<h3>Makefile</h3>

<p>A <a href="https://raw.githubusercontent.com/jacebrowning/info/main/Makefile"><code>Makefile</code></a> puts everything together. I like using <code>make</code> (rather than <code>rake</code>) because it doesn&#39;t depend on Ruby itself, does a good of tracking when files have changed, and provides a standard interface between projects.</p>

<p>I&#39;ll highlight the important parts of this file. This reinstalls the dependencies whenever they change:</p>
<div class="highlight"><pre><code class="language-makefile" data-lang="makefile"><span class="nv">VENDOR_DIR</span> <span class="o">:=</span> vendor
<span class="nv">INSTALLED_FLAG</span> <span class="o">:=</span> <span class="nv">$(VENDOR_DIR)</span>/.installed

<span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">install</span>
<span class="nl">install</span><span class="o">:</span> <span class="nf">$(INSTALLED_FLAG)</span>
<span class="nl">$(INSTALLED_FLAG)</span><span class="o">:</span> <span class="nf">Gemfile* Makefile</span>
	bundle <span class="nb">install</span> <span class="nt">--path</span> vendor
	<span class="p">@</span> <span class="nb">touch</span> <span class="nv">$(INSTALLED_FLAG)</span>
</code></pre></div>
<p>This builds the site and validates the generated HTML:</p>
<div class="highlight"><pre><code class="language-makefile" data-lang="makefile"><span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">build</span>
<span class="nl">build</span><span class="o">:</span> <span class="nf">install</span>
	bundle <span class="nb">exec </span>jekyll build <span class="nt">--quiet</span>
	bundle <span class="nb">exec </span>htmlproof _site <span class="nt">--only-4xx</span>
</code></pre></div>
<p>And these targets provide a way to run the site locally:</p>
<div class="highlight"><pre><code class="language-makefile" data-lang="makefile"><span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">run</span>
<span class="nl">run</span><span class="o">:</span> <span class="nf">install</span>
	bundle <span class="nb">exec </span>jekyll serve <span class="nt">--future</span> <span class="nt">--drafts</span>

<span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">launch</span>
<span class="nl">launch</span><span class="o">:</span> <span class="nf">install</span>
	<span class="nb">eval</span> <span class="s2">"sleep 5; open http://localhost:4000"</span> &amp; make run
</code></pre></div>
<p>See the <a href="https://github.com/jacebrowning/jacebrowning.info">source code</a> that generates <strong>this</strong> site as an example of how these files are used together in practice.</p>

<h2>Developing Locally</h2>

<p>Using the above tooling, my only system dependencies are <code>ruby</code>, <code>bundler</code>, and <code>make</code>. To work on a new blog entry, I simply run:</p>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nv">$ </span>make launch
</code></pre></div>
<p>to bring up a local instance of the site that is regenerated whenever I edit content.</p>

<p>When I am done editing, running <code>$ make ci</code> will confirm that the site is ready to be published.</p>

<h2>Deploying with Travis CI</h2>

<p><a href="https://travis-ci.org/">Travis CI</a> offers free continuous integration for open source projects that can be used to deploy software after running a number of checks.</p>

<p>Adding a <a href="https://raw.githubusercontent.com/jacebrowning/info/main/.travis.yml"><code>.travis.yml</code></a> to your project tells Travis CI how to build and deploy your site. This specifies which commands to run to install and validate each commit:</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">install</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">make install</span>

<span class="na">script</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">make ci</span>
</code></pre></div>
<p>If a new commit passes those checks, the following shell script is run:</p>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="c"># Generate HTML</span>
make build <span class="p">;</span>
<span class="c"># Configure Git with Travis CI information</span>
git config <span class="nt">--global</span> user.email <span class="s2">"travis@travis-ci.org"</span> <span class="p">;</span>
git config <span class="nt">--global</span> user.name <span class="s2">"travis-ci"</span> <span class="p">;</span>
<span class="c"># Delete the current repository</span>
<span class="nb">rm</span> <span class="nt">-rf</span> .git <span class="p">;</span>
<span class="c"># Rebuild the repository from the generated files and push to GitHub pages</span>
<span class="nb">cd </span>_site <span class="p">;</span>
git init <span class="p">;</span>
git add <span class="nb">.</span> <span class="p">;</span>
git commit <span class="nt">-m</span> <span class="s2">"Deploy Travis CI build </span><span class="nv">$TRAVIS_BUILD_NUMBER</span><span class="s2"> to GitHub pages"</span> <span class="p">;</span>
git push <span class="nt">-f</span> https://<span class="k">${</span><span class="nv">GH_TOKEN</span><span class="k">}</span>@github.com/<span class="k">${</span><span class="nv">TRAVIS_REPO_SLUG</span><span class="k">}</span> main:gh-pages <span class="p">;</span>
</code></pre></div>
<p>which will publish the generated files to the <code>gh-pages</code> branch on GitHub.</p>

<p><code>GH_TOKEN</code> is an encrypted access token to grant Travis CI permissions to modify files in your repository. <a href="https://benlimmer.com/2013/12/26/automatically-publish-javadoc-to-gh-pages-with-travis-ci/">This site</a> provides a good overview on generating these tokens.</p>

<p>After deployment, you should now see your Jekyll blog live at:</p>

<p><code>https://&lt;your-github-id&gt;.github.io/&lt;your-repository-name&gt;</code></p>

<hr>

<p>See a typo? Help me <a href="https://github.com/jacebrowning/jacebrowning.info/edit/main/_posts/2015-09-04-deploying-jekyll-to-github-pages-with-travis.md">edit</a> this post.</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>
    </div>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6468614-2', 'auto');
  ga('send', 'pageview');

</script>


  </body>
</html>
